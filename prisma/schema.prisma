generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int            @id @default(autoincrement())
  email         String         @unique
  passwordHash  String         @map("password_hash")
  name          String
  createdAt     DateTime       @default(now()) @map("created_at")
  bmiRecords    BmiRecord[]
  consultations Consultation[]

  @@map("users")
}

model BmiRecord {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  weight    Float
  height    Float
  bmi       Float
  category  String
  gender    String // Added gender field
  createdAt DateTime @default(now()) @map("created_at")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("bmi_records")
}

model Consultation {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  subject   String
  message   String
  status    String   @default("pending")
  createdAt DateTime @default(now()) @map("created_at")
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("consultations")
}

